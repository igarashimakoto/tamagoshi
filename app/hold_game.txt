import React, { useEffect, useState } from 'react';
import { getSaves } from './db'; // Importa o método para buscar os saves
import './App.css'; // Importa o CSS para estilizar os cards
import { StyleSheet } from 'react-native';

interface Save {
  id: number;
  name: string;
  goshiType: number;
  goshiHealth: number;
  goshiSleep: number;
  goshiHappiness: number;
  goshiStatus: string;
}

const styles = StyleSheet.create({

})

const Index: React.FC = () => {
  const [saves, setSaves] = useState<Save[]>([]);

  // Função para buscar os saves do banco de dados
  useEffect(() => {
    getSaves()
      .then((data) => {
        setSaves(data); // Atualiza o estado com os saves recebidos
      })
      .catch((err) => {
        console.error('Erro ao buscar saves:', err);
      });
  }, []);

  // Função chamada ao clicar em um card
  const openGame = (id: number) => {
    console.log(`Abrir jogo com id: ${id}`);
    // Aqui você pode adicionar lógica para abrir o jogo
  };

  return (
    <div className="saves-container">
      <h1>Lista de Saves</h1>
      <div className="cards-list">
        {saves.map((save) => (
          <div key={save.id} className="card" onClick={() => openGame(save.id)}>
            <h2>{save.name}</h2>
            <p>Tipo: {save.goshiType}</p>
            <p>Saúde: {save.goshiHealth}</p>
            <p>Sono: {save.goshiSleep}</p>
            <p>Felicidade: {save.goshiHappiness}</p>
            <p>Status: {save.goshiStatus}</p>
          </div>
        ))}
      </div>
    </div>
  );
};

export default Index;
